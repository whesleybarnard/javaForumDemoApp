CREATE SCHEMA ENTELECT;

CREATE SEQUENCE ENTELECT.GENERIC_SEQ;

-- DROP TABLE ORDER_LINE;
--
-- DROP TABLE CUSTOMER_ORDER;
--
-- DROP TABLE CUSTOMER;
--
-- DROP TABLE PRODUCT;

CREATE TABLE CUSTOMER(
  ID BIGINT NOT NULL,
  NAME VARCHAR(255) NOT NULL,
  SURNAME VARCHAR(255) NOT NULL,
  ID_NUMBER VARCHAR(13),
  PRIMARY KEY (ID)
);

CREATE TABLE PRODUCT(
  ID BIGINT NOT NULL,
  NAME VARCHAR(255) NOT NULL,
  DESCRIPTION VARCHAR(500) NOT NULL,
  PRICE DECIMAL(18,2) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE ORDER_LINE(
  ID BIGINT NOT NULL,
  CUSTOMER_ORDER_ID BIGINT NOT NULL,
  PRODUCT_ID BIGINT NOT NULL,
  QUANTITY BIGINT NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE CUSTOMER_ORDER(
  ID BIGINT NOT NULL,
  CUSTOMER_ID BIGINT NOT NULL,
  ORDER_DATE DATETIME NOT NULL,
  COMPLETED BIT,
  PRIMARY KEY (ID)
);

ALTER TABLE ORDER_LINE
  ADD CONSTRAINT FK_ORDER FOREIGN KEY (CUSTOMER_ORDER_ID) REFERENCES CUSTOMER_ORDER;

ALTER TABLE CUSTOMER_ORDER
  ADD CONSTRAINT FK_CUSTOMER FOREIGN  KEY (CUSTOMER_ID) REFERENCES CUSTOMER;